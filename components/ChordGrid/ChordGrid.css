

.chord-grid {
    display: grid;
    /* grid-template-columns is now set via inline styles from the component */
    gap: 1rem;
    background-color: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    align-items: start; /* Align items to the top */
}

.chord-grid-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    position: relative;
}

.chord-grid-item.is-dragging-wrapper {
    opacity: 0.4;
}

/* Drop target indicator */
.chord-grid-item.drag-over-wrapper::before {
    content: '';
    position: absolute;
    top: -5px;
    bottom: -5px;
    left: -5px;
    right: -5px;
    border: 2px dashed cyan;
    border-radius: 12px;
    pointer-events: none;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* New style for when the visualizer is active */
@media (max-width: 768px) {
    /* Rely on the parent .chord-grid's `gap` property for consistent vertical spacing. */

    .chord-grid-item.visualizer-active {
        flex-direction: row;
        height: 120px; /* Give a fixed height to contain children */
        align-items: stretch;
        gap: 0.5rem; /* Add a small gap between the card and visualizer */
    }

    .chord-grid-item.visualizer-active > .chord-card {
        flex: 0 0 20%; /* Give more space to visualizer */
        max-width: 80px; /* Prevent the card from becoming too wide */
    }

    .chord-grid-item.visualizer-active > .note-visualizer {
        flex: 1 1 80%; /* Allow it to take up the remaining ~80% space */
        min-width: 0;   /* CRITICAL: Allows flex item to shrink and scroll internally */
    }
}